<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="#f97316">
<title>Curry House â€” Menu</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{--ch-primary:#f97316;--ch-bg:#fff7ed}
body{background:var(--ch-bg);background-image:radial-gradient(rgba(0,0,0,.03)1px,transparent 1px),radial-gradient(rgba(0,0,0,.02)1px,transparent 1px);background-size:18px 18px,28px 28px;background-position:0 0,9px 9px}
.title-gradient{color:var(--ch-primary)}
.card{background:#fff;border-radius:1rem;box-shadow:0 10px 20px rgba(0,0,0,.05)}
.price{color:var(--ch-primary);font-weight:700}
.checkbox{width:1.15rem;height:1.15rem;accent-color:var(--ch-primary)}
.qty-btn{background:#f97316;color:#fff;border-radius:6px;width:1.8rem;height:1.8rem;text-align:center;line-height:1.8rem;font-weight:bold;cursor:pointer;user-select:none}
.sticky-bar{position:fixed;left:0;right:0;bottom:0;z-index:50;background:#fff;border-top:1px solid rgba(249,115,22,.25);box-shadow:0 -6px 16px rgba(0,0,0,.08)}
</style>
</head>
<body class="text-[15px] text-gray-800 pb-28">
<header class="max-w-6xl mx-auto px-4 py-8">
<h1 class="text-3xl md:text-4xl font-semibold title-gradient">Curry House â€” Montreuil</h1>
<p class="text-gray-600">Menu sur place Â· Commande WhatsApp</p>
</header>

<div class="max-w-6xl mx-auto px-4 mt-2">
<input id="search" type="search" placeholder="Rechercher un plat..." class="w-full px-4 py-3 rounded-xl border border-orange-200 bg-white/80 focus:outline-none focus:ring-2 focus:ring-orange-300">
</div>

<main id="menu" class="max-w-6xl mx-auto px-4 pb-32 mt-4"></main>

<!-- barre fixe -->
<div class="sticky-bar">
<div class="max-w-6xl mx-auto px-4 py-3 grid gap-3 md:flex md:items-end md:justify-between">
<div class="flex flex-col md:flex-row gap-2 md:items-center flex-wrap w-full">
<label class="text-sm text-gray-700 whitespace-nowrap">Nom du client :</label>
<input id="clientName" type="text" placeholder="ex. Karim" class="px-3 py-2 rounded-lg border border-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-300" required>
<label class="text-sm text-gray-700 whitespace-nowrap">NÂ° de table :</label>
<input id="tableNumber" type="number" min="1" placeholder="ex. 5" class="w-20 px-3 py-2 rounded-lg border border-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-300" required>
<div class="flex items-center gap-3 mt-2 md:mt-0">
<div id="orderTotal" class="text-lg font-semibold text-gray-900">Total : 0,00 â‚¬</div>
<a id="sendWhatsApp" href="#" class="px-5 py-3 rounded-xl bg-green-600 text-white font-semibold text-center md:min-w-[240px]">ðŸ’¬ Envoyer</a>
</div>
</div>
</div>
</div>

<script>
const DATA=[
{category:"EntrÃ©es",items:[
{name:"Poulet tikka (4 pcs)",price:4.5,desc:"DÃ©s de poulet macÃ©rÃ©s aux Ã©pices"},
{name:"Agneau tikka (4 pcs)",price:5.5,desc:"Morceaux dâ€™agneau marinÃ©s aux Ã©pices"},
{name:"Crispy oignon (2 pcs)",price:3.5,desc:"Beignets dâ€™oignons Ã©picÃ©s"}]},
{category:"Plats Tandoori",items:[
{name:"Poulet tandoori (1 pc)",price:4.5},
{name:"Gambas tandoori (2 pcs)",price:7}]},
{category:"Pains maison",items:[
{name:"Naan",price:2},
{name:"Naan au fromage",price:3}]},
{category:"Boissons",items:[
{name:"Coca-Cola 33 cl",price:2},
{name:"ThÃ© indien massala",price:2.5}]}
];

const menuEl=document.getElementById("menu");
const searchEl=document.getElementById("search");
const selected=new Map();
const euro=n=>`${n.toFixed(2).replace(".",",")} â‚¬`;

function itemRow(item,index){
const id=`id_${Math.random().toString(36).slice(2,9)}`;
return`
<div class="flex items-center justify-between py-2 border-b border-orange-50 gap-3">
<div class="flex items-start gap-3">
<input id="${id}" type="checkbox" class="checkbox mt-1" data-name="${item.name}" data-price="${item.price}">
<label for="${id}" class="cursor-pointer">
<p class="font-medium">${index}. ${item.name}</p>
${item.desc?`<p class="text-sm text-gray-600">${item.desc}</p>`:""}
</label>
</div>
<div class="flex items-center gap-3">
<div class="flex items-center gap-1" data-qty-box="${id}" style="display:none;">
<div class="qty-btn" data-action="minus" data-id="${id}">-</div>
<span id="qty_${id}">1</span>
<div class="qty-btn" data-action="plus" data-id="${id}">+</div>
</div>
<div class="price">${euro(item.price)}</div>
</div></div>`;}

function attachHandlers(wrap){
wrap.querySelectorAll(".checkbox").forEach(cb=>{
cb.addEventListener("change",e=>{
const id=e.target.id;const name=e.target.dataset.name;const price=parseFloat(e.target.dataset.price);
const qtyBox=wrap.querySelector(`[data-qty-box="${id}"]`);
if(e.target.checked){selected.set(id,{name,price,qty:1});qtyBox.style.display="flex";}
else{selected.delete(id);qtyBox.style.display="none";}
updateTotal();});
});
wrap.querySelectorAll(".qty-btn").forEach(btn=>{
btn.addEventListener("click",()=>{
const id=btn.dataset.id;const item=selected.get(id);if(!item)return;
if(btn.dataset.action==="plus")item.qty++;if(btn.dataset.action==="minus"&&item.qty>1)item.qty--;
selected.set(id,item);wrap.querySelector(`#qty_${id}`).textContent=item.qty;updateTotal();});});}

function render(){
menuEl.innerHTML="";let idx=1;const q=searchEl.value.trim().toLowerCase();
DATA.forEach(cat=>{
const items=cat.items.filter(it=>!q||it.name.toLowerCase().includes(q));
if(!items.length)return;
let html=`<h2 class="text-2xl font-semibold title-gradient mt-6 mb-2">${cat.category}</h2>
<div class="card p-4 divide-y divide-orange-50">${items.map(it=>itemRow(it,idx++)).join("")}</div>`;
const wrap=document.createElement("section");wrap.innerHTML=html;menuEl.appendChild(wrap);attachHandlers(wrap);});
updateTotal();}

function calcTotal(){let t=0;for(const i of selected.values())t+=i.price*i.qty;return t;}
function updateTotal(){document.getElementById("orderTotal").textContent=`Total : ${euro(calcTotal())}`;}
searchEl.addEventListener("input",render);render();

document.getElementById("sendWhatsApp").addEventListener("click",e=>{
e.preventDefault();
if(selected.size===0)return alert("Merci de cocher au moins un plat.");
const name=document.getElementById("clientName").value.trim();
const table=document.getElementById("tableNumber").value.trim();
if(!name||!table)return alert("Merci dâ€™indiquer le nom et le numÃ©ro de table.");
let msg=`Bonjour Curry House,%0ACommande de ${name} (table ${table})%0A%0A`;
for(const it of selected.values())msg+=`- ${it.name} x${it.qty} (${(it.price*it.qty).toFixed(2).replace(".",",")} â‚¬)%0A`;
msg+=`%0AðŸ”¸ Total : ${calcTotal().toFixed(2).replace(".",",")} â‚¬`;
window.open(`https://wa.me/33763424110?text=${msg}`,"_blank");});
</script>
</body>
</html>
